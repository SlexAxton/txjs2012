<!DoctYpe html>
<html lang=en>
  <head>
    <meta charset=utf-8>
    <title>TXJS 2012 | Texas JavaScript Conference</title>
    <style type="text/css">
      body, html {
        height: 100%;
        width: 100%;
        overflow: hidden;
        background-color: rgba(252,84,63,1);
        margin: 0;
        padding: 0;
      }
      #scene {
        width: 100%;
        height: 100%;
        background-color: #FFF;
        border-top-left-radius: 50%;
        border-top-right-radius: 50%;
        box-shadow: inset 0 0 300px 200px rgba(252,84,63,1), inset 0 0 400px 400px rgba(255,216,164,1);
        -webkit-background-clip: padding-box;
        width: 150%;
        height: 150%;
        margin-left: -25%;
        background-color: #FFF;
        border-top-left-radius: 50%;
        border-top-right-radius: 50%;
        box-shadow: inset 0 0 300px 200px rgba(252,84,63,1), inset 0 0 400px 400px rgba(255,216,164,1);
        -webkit-background-clip: padding-box;
      }
      #scene-outer {
        border-width: 10px 10px 0 10px;
        border-style: solid;
        border-color: rgba(252,84,63,1);
        margin-left: -1px;
        width: 150%;
        height: 150%;
        margin-left: -25%;
        position: absolute;
        border-top-left-radius: 49%;
        border-top-right-radius: 49%;
        box-sizing: border-box;
        box-shadow: inset 0 0 75px rgba(252,84,63,1);
      }
      #fg, #power, #fg-mountains, #bg-mountains {
        position: fixed;
        z-index: 5;
        width: 100%;
        left: 0;
        bottom: -6px;
      }
      #power {
        z-index: 4;
        left: 0;
        bottom: 0;
      }
      #fg-mountains {
        z-index: 3;
      }
      #bg-mountains {
        z-index: 2;
      }
      #cover {
        width: 100%;
        height: 100%;
        position:fixed;
        top: 0;
        left: 0;
        margin: 0;
        padding: 0;
        z-index:10;
      }
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
      // Throttle/Debounce @cowboy | MIT
      (function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
      jQuery(function($){
        var max = 60,
        layers = [
          {
            el : $('#fg'),
            mult : 0.9
          },
          {
            el : $('#power'),
            mult : 0.6
          },
          {
            el : $('#fg-mountains'),
            mult : 0.3
          },
          {
            el : $('#bg-mountains'),
            mult : 0.15
          }
        ],
        doc = $(document),
        scene = $('#scene'),
        dbnc,
        onWinResize = function () {
          docSize = doc.outerWidth();
          halfDoc = docSize/2;
          $( layers ).each(function ( i, layer ) {
            layer.el.width( docSize + (max*2) );
            layer.el.css('left', '-' + max + 'px');
          });
        },
        docSize,
        halfDoc;

        // Get some bleed
        // Resize changes our math
        $(window).resize($.throttle( 50, onWinResize));
        onWinResize();

        // Listen for the mouseMove
        $('#cover').mousemove($.throttle(13, function(e){

          $( layers ).each(function ( i, layer ) {
            var x    = e.pageX, card, offset;
            if ( x < halfDoc ) {
              card = '-';
              offset = max;
            }
            else {
              card = '';
              offset = max * -1;
            }
            layer.el.css( 'left', card + ((Math.abs( (x-halfDoc)/halfDoc ) * (max * layer.mult)) + offset) + 'px' );
          });
        }));
      });
    </script>
  </head>
  <body>
    <div id="cover"></div>
    <div id="scene-outer"></div>
    <div id="scene">
      <div id="fg">
        <object width="100%" data='txjs1.svg' type='image/svg+xml'>
          <param name='src' value='txjs1.svg' />
        </object>
      </div>
      <div id="power">
        <object width="100%" data='txjs2.svg' type='image/svg+xml'>
          <param name='src' value='txjs2.svg' />
        </object>
      </div>
      <div id="fg-mountains">
        <object width="100%" data='txjs3.svg' type='image/svg+xml'>
          <param name='src' value='txjs3.svg' />
        </object>
      </div>
      <div id="bg-mountains">
        <object width="100%" data='txjs4.svg' type='image/svg+xml'>
          <param name='src' value='txjs4.svg' />
        </object>
      </div>
    </div>
  </body>
</html>
